<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head :: head">
</head>
<body>
<h1 sec:authorize="hasRole('ROLE_CUSTOMER')">Customer Portal</h1>
<h1 sec:authorize="hasRole('ROLE_EMPLOYEE')">Employee Portal</h1>
<a th:href="@{/}">Home</a>
<a sec:authorize="hasRole('ROLE_EMPLOYEE')" th:href="@{/employee}">Back to Employee</a>

<div th:replace="fragments/logout :: logout"></div>
<br/>
<h3>Customer Information</h3>
<div th:replace="fragments/manage-account :: name"></div>
<br/>
<div sec:authorize="hasRole('ROLE_CUSTOMER')">
<a th:href="@{/customer/profile}">Edit Profile</a>
</div>
<h3>Account Information</h3>
<table id="accountInformation">
<thead>
<tr><th>Account Number</th><th>Balance</th><th>Action</th></tr>
</thead>
<tbody>
<tr th:each="account: ${customer.accounts}">
<td th:text="${account.accountId}">X</td>
<td th:text="${'$' + #numbers.formatDecimal(account.balance,3,'COMMA',2,'POINT')}">BBBB</td>
<td sec:authorize="hasRole('ROLE_EMPLOYEE')"><a th:href="@{/employee/customer/} + ${customer.customerId} + '/account/' + ${account.accountId}">Manage</a></td>
<td sec:authorize="hasRole('ROLE_CUSTOMER')"><a th:href="@{/customer/account/} + ${account.accountId}">Manage</a></td>
</tr>
</tbody>
</table>
</body>
</html>